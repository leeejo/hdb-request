<!DOCTYPE html>
<html>
<head>
<title>HDB reqest</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
<script src="https://unpkg.com/@heroicons/vue@latest/dist/heroicons.min.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
<style type="text/tailwindcss">
  body {
      font-family: 'Inter', sans-serif; /* Apply Inter font to the entire body */
  }

    /* Styles for the modal overlay and content */
    .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
    display: flex;
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    z-index: 1000; /* Ensure it's on top */
  }

  .modal-content {
    background-color: white;
    border-radius: 0.5rem; /* Rounded corners */
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -1px rgb(0 0 0 / 0.06);
    max-width: 800px; /* Max width of 800px */
    max-height: 80%; /* Keep max-height for very large screens (optional) */
    width: 100%; /* Occupy full width within max-width */
    overflow-y: auto; /* Add scroll if content overflows */
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid #ddd;
  }

  .modal-body {
    padding: 1rem;
  }

  .modal-footer {
    display: flex;
    justify-content: flex-end; /* Align buttons to the right */
    padding: 1rem;
    border-top: 1px solid #ddd;
  }

  /* Hide the modal by default */
  .modal-overlay.hidden {
    display: none;
  }

  /* Styles for the multi-select dropdown */
  .multiselect-dropdown {
    position: relative;
    display: inline-block;
    width: 100%; /* Make it full width */
  }

  .multiselect-dropdown button {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 0.25rem;
    width: 100%;
    background-color: white;
    cursor: pointer;
  }

  .multiselect-dropdown .options {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    border: 1px solid #ccc;
    border-radius: 0.25rem;
    background-color: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    z-index: 1001; /* Ensure it's above the modal */
    display: none; /* Hidden by default */
    max-height: 200px; /* Set a maximum height for scrolling */
    overflow-y: auto;
  }

  .multiselect-dropdown .options label {
    display: block;
    padding: 0.5rem;
    cursor: pointer;
  }

  .multiselect-dropdown .options input[type="checkbox"] {
    margin-right: 0.5rem;
  }

  .multiselect-dropdown .options label:hover {
    background-color: #f0f0f0;
  }

  .multiselect-dropdown.open .options {
    display: block;
  }

  .selected-options {
    display: inline-block;
    margin-left: 0.5rem;
  }
</style>



<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          'hdb-blue': '#0F477E',
        },
      },
    },
  }
</script>

</head>
<body>

  <body class="bg-white">

    <header class="flex items-center p-3 text-white bg-hdb-blue min-w-[320px]">
     
      <div class="mx-4 my-auto">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 fill-white">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5" />
            </svg>
          </div>

            <h1 class="text-2xl font-medium leading-tight text-white whitespace-nowrap">Sales Processing System</h1>

 
    </header>


<div class="container mx-auto p-8">
    <div class="text-gray-500 mb-4">
        Home / In-tray / 8013197D
    </div>
    
    <div class="flex justify-between items-start mb-4">
      <div>
          <h2 class="text-2xl font-bold">Application Reg No. 8013197D</h2>
          <p class="text-gray-500">Updated on Thurs, 02 Nov 2023 at 09:58 AM (SGT)</p>
      </div>
      <button class="bg-blue-700 text-white rounded p-2">Case Action</button>
  </div>

    <div class="rounded p-8 border">
        
        <div class="grid grid-cols-6 gap-4 mb-4">
            <div>
                <div class="font-bold">Case Status</div>
                <div class="text-blue-500">In progress</div>
            </div>
            <div>
                <div class="font-bold">Mode of Sale</div>
                <div>BTO</div>
            </div>
            <div>
                <div class="font-bold">New Town/Estate</div>
                <div>Kallang/Whampoa</div>
            </div>
            <div>
                <div class="font-bold">Flat Type</div>
                <div>4-Room</div>
            </div>
            <div>
                <div class="font-bold">Sales Launch</div>
                <div>2023-05</div>
            </div>
            <div>
                <div class="font-bold">Current Step</div>
                <div>AFL Preparation</div>
            </div>
            <div>
                <div class="font-bold">2 Applicants</div>
            </div>
            <div>
                <div class="font-bold">Tags</div>
                <div>Handheld</div>
            </div>
        </div>

        <div class="grid grid-cols-3 gap-4 mb-4">
            <div>
                <div class="font-bold">Application Date</div>
                <div>2023-05-30</div>
            </div>
            <div>
                <div class="font-bold">Booking Date</div>
                <div>2023-05-30</div>
            </div>
            <div>
                <div class="font-bold">Probable Completion Date</div>
                <div>2026-Q4</div>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
                <div class="font-bold">Assigned Staff</div>
                <div>David Soh Fu Guang (54321P)</div>
            </div>
            <div>
                <div class="font-bold">Assigned Date</div>
                <div>-</div>
            </div>
        </div>

        <div class="mb-4">
            <div class="font-bold">Application CRM</div>
        </div>
</div>

<div class="flex space-x-4 my-8">
  <div class="bg-blue-500 text-white rounded p-2">Post Appointment</div>
  <div class="border border-blue-500 rounded p-2">AFL Checks</div>
  <div class="border border-blue-500 rounded p-2">AFL Preparation</div>
  <div class="border border-blue-500 rounded p-2">AFL Signing</div>
  <div class="border border-blue-500 rounded p-2">Post AFL Signing</div>
</div>

<div class="flex space-x-4 mb-8">
  <div class="border border-gray-300 rounded p-2">App Details</div>
  <div class="border border-gray-300 rounded p-2">Q Checks</div>
  <div class="border border-gray-300 rounded p-2">Finances</div>
  <div class="border border-gray-300 rounded p-2">Tasks</div>
  <div class="border border-gray-300 rounded p-2">Appointments</div>
  <div class="border border-gray-300 rounded p-2">Documents</div>
  <div class="border border-gray-300 rounded p-2 bg-blue-100 text-blue-700">Requests</div>
</div>

<div class="border border-gray-300 rounded p-4">
  <div class="text-center text-gray-500">Your request list is empty.</div>
  <button id="openModalBtn" class="bg-blue-700 text-white rounded p-2 mt-4 block mx-auto">Create Request</button>
</div>

</div>

<div id="requestModal" class="modal-overlay hidden">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="text-lg font-bold">Create Request</h2>
      <button id="closeModalBtn" class="text-gray-500 hover:text-gray-700">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <form>
        <div class="mb-4">
          <label for="requestDetails" class="block text-gray-700 font-bold mb-2">Req No.</label>
<p class="font-bold">8013197D</p>      
</div>

        <div class="mb-4">
          <label for="requestDetails" class="block text-gray-700 font-bold mb-2">Request Details:</label>
<!-- --->
          <div id="multiSelectWrapper" class="relative w-full max-w-sm bg-white border border-gray-300 rounded-lg shadow-md">
        <div class="flex flex-wrap items-center gap-2 p-3 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500">

            <div id="selectedTagsContainer" class="flex flex-wrap gap-2">
                </div>

            <input type="text" id="searchInput" placeholder="Add or search items..." class="flex-1 min-w-[100px] p-1 outline-none text-gray-800">

        </div>

        <div id="dropdownList" class="absolute z-10 w-full bg-white border border-gray-300 rounded-b-lg shadow-lg mt-px hidden">
            <ul id="optionsList" class="max-h-48 overflow-y-auto custom-scrollbar">
                </ul>
            <div class="p-3 border-t border-gray-200">
                <button type="button" id="unselectAllBtn" class="text-blue-600 hover:underline text-sm font-medium">Unselect all</button>
            </div>
        </div>

    </div>    
     <!--     -->

      
   
                </div>
        </form>
    </div>
    <div class="modal-footer">
      <button id="cancelBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mr-2">Cancel</button>
      <button id="proceedBtn" class="bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded">Proceed</button>
    </div>
  </div>
</div>

<script>
  const openModalBtn = document.getElementById('openModalBtn');
  const closeModalBtn = document.getElementById('closeModalBtn');
  const requestModal = document.getElementById('requestModal');
  const cancelBtn = document.getElementById('cancelBtn');
  const proceedBtn = document.getElementById('proceedBtn');

  openModalBtn.addEventListener('click', () => {
    requestModal.classList.remove('hidden');
  });

  closeModalBtn.addEventListener('click', () => {
    requestModal.classList.add('hidden');
  });

  cancelBtn.addEventListener('click', () => {
    requestModal.classList.add('hidden');
  });

  proceedBtn.addEventListener('click', () => {
    // Handle proceed logic here (e.g., form submission)
    requestModal.classList.add('hidden'); // Close after proceed
  });

  // Close modal if clicked outside the content area
  requestModal.addEventListener('click', (event) => {
    if (event.target === requestModal) {
      requestModal.classList.add('hidden');
    }
  });

    // multi-select dropdown
  // --- 1. Get References to HTML Elements ---
const multiSelectWrapper = document.getElementById('multiSelectWrapper');
const searchInput = document.getElementById('searchInput');
const dropdownList = document.getElementById('dropdownList');
const selectedTagsContainer = document.getElementById('selectedTagsContainer');
const optionsList = document.getElementById('optionsList');
const unselectAllBtn = document.getElementById('unselectAllBtn');

// --- 2. Data to Manage (Your Options & Current Selections) ---
const allOptions = [
    { id: 'opt1', name: 'Option A' },
    { id: 'opt2', name: 'Option B' },
    { id: 'opt3', name: 'Option C' },
    { id: 'opt4', name: 'Longer Option D Name' },
    { id: 'opt5', name: 'Another Option E' },
    { id: 'opt6', name: 'Final Option F' },
];

let selectedItems = []; // This array will hold the 'id' of currently selected options

// --- 3. Functions to Render & Update the UI ---

// Function to update the displayed selected tags (pills)
function renderSelectedTags() {
    selectedTagsContainer.innerHTML = ''; // Clear existing tags

    selectedItems.forEach(itemId => {
        const item = allOptions.find(o => o.id === itemId);
        if (!item) return; // Should not happen if data is consistent

        const tagSpan = document.createElement('span');
        tagSpan.className = 'inline-flex items-center px-2 py-1 text-sm font-medium text-purple-800 bg-purple-100 rounded-md';
        tagSpan.innerHTML = `
            ${item.name}
            <button type="button" class="ml-1 h-4 w-4 inline-flex items-center justify-center rounded-full bg-purple-200 text-purple-600 hover:bg-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2" data-item-id="${item.id}">
                <svg class="h-2.5 w-2.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
                <span class="sr-only">Remove ${item.name}</span>
            </button>
        `;
        selectedTagsContainer.appendChild(tagSpan);

        // Add event listener to the dynamically created remove button
        tagSpan.querySelector('button').addEventListener('click', (event) => {
            const idToRemove = event.currentTarget.dataset.itemId;
            selectedItems = selectedItems.filter(id => id !== idToRemove);
            renderAll(); // Re-render everything
        });
    });
}

// Function to update the displayed options in the dropdown list
function renderOptions() {
    optionsList.innerHTML = ''; // Clear existing options
    const searchTerm = searchInput.value.toLowerCase();

    allOptions.forEach(option => {
        // Filter based on search term
        if (searchTerm && !option.name.toLowerCase().includes(searchTerm)) {
            return; // Skip if it doesn't match search
        }

        const li = document.createElement('li');
        li.className = 'px-3 py-2 hover:bg-gray-100 cursor-pointer'; // Only apply cursor-pointer to LI
        li.innerHTML = `
            <label class="flex items-center text-gray-800 cursor-pointer w-full">
                <input type="checkbox" class="form-checkbox h-4 w-4 text-blue-600 rounded" data-item-id="${option.id}" ${selectedItems.includes(option.id) ? 'checked' : ''}>
                <span class="ml-2">${option.name}</span>
            </label>
        `;
        optionsList.appendChild(li);

        // Add event listener to the checkbox
        li.querySelector('input[type="checkbox"]').addEventListener('change', (event) => {
            const id = event.currentTarget.dataset.itemId;
            if (event.currentTarget.checked) {
                if (!selectedItems.includes(id)) {
                    selectedItems.push(id);
                }
            } else {
                selectedItems = selectedItems.filter(item => item !== id);
            }
            renderAll(); // Re-render both tags and options to reflect changes
        });
    });
}

// Helper to render both parts
function renderAll() {
    renderSelectedTags();
    renderOptions();
}

// Function to show/hide the dropdown
function toggleDropdown(show) {
    if (show) {
        dropdownList.classList.remove('hidden');
        renderOptions(); // Ensure options are fresh when showing
    } else {
        // A small delay for blur to allow click events on dropdown items
        setTimeout(() => {
            if (!dropdownList.contains(document.activeElement) && !multiSelectWrapper.contains(document.activeElement)) {
                 dropdownList.classList.add('hidden');
            }
        }, 100);
    }
}


// --- 4. Event Listeners (Making it Interactive) ---

// Show dropdown when search input is focused
searchInput.addEventListener('focus', () => toggleDropdown(true));

// Hide dropdown when focus leaves the entire multi-select component
// This requires a bit more logic to ensure clicking inside doesn't close it
document.addEventListener('click', (event) => {
    if (!multiSelectWrapper.contains(event.target)) {
        // Clicked outside the multi-select, hide dropdown
        dropdownList.classList.add('hidden');
    }
});

// Filter options as user types
searchInput.addEventListener('input', renderOptions);

// Handle "Unselect all" button click
unselectAllBtn.addEventListener('click', () => {
    selectedItems = []; // Clear all selections
    searchInput.value = ''; // Clear search input
    renderAll(); // Update the UI
});

// --- 5. Initial Render on Page Load ---
document.addEventListener('DOMContentLoaded', renderAll); // Render everything when the page loads
  
</script>


<footer class="bg-gray-200 p-4 text-center text-gray-500">
    <div>2024, Government of Singapore</div>
    <div class="mt-2">Last updated 31 May 2024 v1.1.3</div>
</footer>

</body>
  
</body>
</html>
