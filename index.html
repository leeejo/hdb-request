<!DOCTYPE html>
<html>
<head>
<title>HDB request</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
<script src="https://unpkg.com/@heroicons/vue@latest/dist/heroicons.min.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style type="text/tailwindcss">
    /* Tailwind Configuration */
  @tailwind base;
  @tailwind components;
  @tailwind utilities;

  body {
      /* Apply Inter font and background color via custom class on body */
      @apply font-inter bg-white text-gray-900;
  }

    /* Custom Tailwind Components */
  @layer components {
    /* Ghost Loader Skeleton */
    .ghost-loader {
      @apply animate-pulse bg-gray-200 rounded-md;
      min-height: 32px;
    }
    .ghost-loader.sm {
      min-height: 20px;
      width: 80px;
    }
    .ghost-loader.lg {
      min-height: 32px;
      width: 160px;
    }
    /* Primary Button */
    .btn-primary {
      @apply bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm 
             focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 
             transition duration-150 ease-in-out;
    }

    /* Outline Button */
    .btn-outline {
      @apply bg-white border border-blue-600 text-blue-600 font-semibold py-2 px-4 rounded-md shadow-sm 
             hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 
             transition duration-150 ease-in-out;
    }

    /* Styles for the modal overlay and content */
    .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
    display: flex;
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    z-index: 1000; /* Ensure it's on top */
  }

  .modal-content {
    background-color: white;
    border-radius: 0.5rem; /* Rounded corners */
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -1px rgb(0 0 0 / 0.06);
    max-width: 800px; /* Max width of 800px */
    width: 100%; /* Occupy full width within max-width */
    min-height:60%;
    max-height: 96vh; /* Keep max-height for very large screens (optional) */
    overflow-y: auto; /* Add scroll if content overflows */
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid #ddd;

     background: white;
  position: sticky;
  top: 0;
  z-index: 10;
  }

  .modal-body {
    padding: 1rem;
  }

  .modal-footer {
    display: flex;
    justify-content: flex-end; /* Align buttons to the right */
    padding: 1rem;
    border-top: 1px solid #ddd;

  position: sticky;
  bottom: 0;
  z-index: 10;
  }

  /* Hide the modal by default */
  .modal-overlay.hidden {
    display: none;
  }

/* multi select - Smooth arrow rotation */
        .selected-options-button .arrow-icon {
            transition: transform 0.2s ease-in-out;
        }
        .selected-options-button.open .arrow-icon {
            transform: rotate(180deg);
        }
        /* Ensure options panel is hidden/shown correctly */
        .multiselect-dropdown .options {
            display: none; /* Hidden by default */
        }
        .multiselect-dropdown.open .options {
            display: block; /* Shown when 'open' class is toggled */
        }
        /* Minimal styling for the selected text inside the button */
        #selectedDisplay {
            flex-grow: 1; /* Allows text to take available space */
            text-align: left; /* Align text to the left within the button */
            white-space: nowrap; /* Prevent text wrapping */
            overflow: hidden; /* Hide overflow */
            text-overflow: ellipsis; /* Add ellipsis for overflow */
        }

        } /* End of Tailwind Components */
</style>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'hdb-blue': '#0F477E', // Custom brand blue
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'], // Define a custom font family for Inter
          }
        },
      },
    }

  </script>

<body>

    <header class="flex items-center p-3 text-white bg-hdb-blue min-w-[320px] shadow-md">
    <div class="mx-4">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-6 text-white">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5" />
      </svg>
    </div>
    <h1 class="text-2xl font-medium leading-tight whitespace-nowrap">Sales Processing System</h1>
  </header>

  <main class="container mx-auto px-4 py-8">
<div class="text-gray-500 text-sm mb-6">
      Home / In-tray / Reg No. 8013197D
    </div>

    <div class="flex justify-between items-center mb-8">
      <div>
        <h2 class="text-2xl font-bold">8013197D</h2>
        <p class="text-sm text-gray-500">Updated on Thurs, 02 Nov 2023 at 09:58 AM (SGT)</p>
      </div>
      <div class="flex space-x-4">
        <div class="relative">
          <button id="moreActionsBtn" class="btn-outline flex items-center">
            More actions </div>
       <button class="btn-outline">
          Add journal
        </button>
        <button class="btn-primary">
          Close request
        </button>
        </div>
    </div>
 

  <!-- Ghost Loader State -->
  <div class="card-base mb-8 p-4 ghost-loader-state ">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-4 mb-6">
      <div class="animate-pulse bg-gray-200 rounded-md h-8 w-40"></div>
      <div class="animate-pulse bg-gray-200 rounded-md h-8 w-40"></div>
      <div class="animate-pulse bg-gray-200 rounded-md h-8 w-40"></div>
      <div class="animate-pulse bg-gray-200 rounded-md h-8 w-40"></div>
    </div>
    <div class="tab-group flex space-x-4 my-6">
      <div class="animate-pulse bg-gray-200 rounded-md h-5 w-20"></div>
      <div class="animate-pulse bg-gray-200 rounded-md h-5 w-20"></div>
      <div class="animate-pulse bg-gray-200 rounded-md h-5 w-20"></div>
      <div class="animate-pulse bg-gray-200 rounded-md h-5 w-20"></div>
      <div class="animate-pulse bg-gray-200 rounded-md h-5 w-20"></div>
    </div>
  </div>


    <div class="flex w-full space-x-4 my-8">
        <div class="flex-1 bg-blue-500 text-white rounded-md p-3 text-center shadow-sm">
            Post Appointment
        </div>

        <div class="flex-1 border border-blue-500 text-blue-600 rounded-md p-3 text-center shadow-sm">
            AFL Checks
        </div>

        <div class="flex-1 border border-blue-500 text-blue-600 rounded-md p-3 text-center shadow-sm">
            AFL Preparation
        </div>

        <div class="flex-1 border border-blue-500 text-blue-600 rounded-md p-3 text-center shadow-sm">
            AFL Signing
        </div>

        <div class="flex-1 border border-blue-500 text-blue-600 rounded-md p-3 text-center shadow-sm">
            Post AFL Signing
        </div>
    </div>

<div class="flex space-x-4 mb-8">
  <div class="border border-gray-300 rounded p-2">App Details</div>
  <div class="border border-gray-300 rounded p-2">Q Checks</div>
  <div class="border border-gray-300 rounded p-2">Finances</div>
  <div class="border border-gray-300 rounded p-2">Tasks</div>
  <div class="border border-gray-300 rounded p-2">Appointments</div>
  <div class="border border-gray-300 rounded p-2">Documents</div>
  <div class="border border-gray-300 rounded p-2 bg-blue-100 text-blue-700">Requests</div>
</div>

<div class="border border-gray-300 rounded p-4">
  <div class="text-center text-gray-500">Your request list is empty.</div>
  <button id="openModalBtn" class="bg-blue-700 text-white rounded p-2 mt-4 block mx-auto">Create Request</button>
</div>

</div>

</main>

  <footer class="bg-gray-200 p-4 text-right text-sm border-t border-gray-300 fixed bottom-0 w-full">
    <div>&copy; 2024, Government of Singapore</div>
    <div class="mt-1">Last updated 31 May 2024 v1.1.3</div>
  </footer>

<div id="requestModal" class="modal-overlay hidden">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="text-lg font-bold">Create Request</h2>
      <button id="closeModalBtn" class="text-gray-500 hover:text-gray-700">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- modal -->
    <div class="modal-body">
      <form>
        <div class="mb-4 grid grid-cols-2 gap-4">
          <div>
            <label for="enquiryRefNo" class="block text-gray-700 font-bold mb-2">Enquiry Ref No.</label>
            <input type="text" id="enquiryRefNo" name="enquiryRefNo" class="border border-gray-300 rounded px-2 py-1 w-full" placeholder="Enter enquiry ref no">
          </div>
          <div>
            <label for="submissionRefNo" class="block text-gray-700 font-bold mb-2">Submission Ref No.</label>
            <input type="text" id="submissionRefNo" name="submissionRefNo" class="border border-gray-300 rounded px-2 py-1 w-full" placeholder="Enter submission ref no">
          </div>
        </div>

        <div class="mb-4">
          <label for="requestDetails" class="block text-gray-700 font-bold mb-2">Request Details:</label>
          <!-- multi select dropdown -->
          <div class="multiselect-dropdown relative w-full">
            <button type="button" id="multiselectButton" class="selected-options-button flex items-center justify-between p-2 border border-gray-300 rounded-md w-full bg-white cursor-pointer text-gray-800 hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50" aria-haspopup="listbox" aria-expanded="false">
              <span id="selectedDisplay">Select Options</span>
              <span class="arrow-icon">&#9660;</span>
            </button>
            <div class="options absolute top-full left-0 w-full border border-gray-300 rounded-md bg-white shadow-lg z-50 max-h-52 overflow-y-auto">
              <ul id="dropdownOptionsList" class="list-none p-0 m-0"></ul>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-bold mb-2">Appointment Option</label>
          <div class="flex items-center">
            <input type="checkbox" id="appointmentOption" name="appointmentOption" class="mr-2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
            <label for="appointmentOption" class="text-gray-700">Select for appointment</label>
          </div>
        </div>

        <div class="mb-4">
          <label for="journalEntry" class="block text-gray-700 font-bold mb-2">Journal Entry</label>
          <textarea id="journalEntry" name="journalEntry" rows="4" class="border border-gray-300 rounded px-2 py-1 w-full" placeholder="Enter journal entry"></textarea>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-bold mb-2">Upload Files</label>
          <div id="dropzone" class="border-2 border-dashed border-gray-300 rounded p-4 text-center cursor-pointer bg-gray-50">
            <span class="block text-gray-500 mb-2">Drag & drop files here or click to upload</span>
            <input type="file" id="fileUpload" name="fileUpload" multiple class="hidden">
            <div id="fileList" class="mt-2 text-left"></div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button id="cancelBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mr-2">Cancel</button>
      <button id="proceedBtn" class="bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded">Proceed</button>
    </div>
  </div>
</div>

<script>
  const openModalBtn = document.getElementById('openModalBtn');
  const closeModalBtn = document.getElementById('closeModalBtn');
  const requestModal = document.getElementById('requestModal');
  const cancelBtn = document.getElementById('cancelBtn');
  const proceedBtn = document.getElementById('proceedBtn');

  openModalBtn.addEventListener('click', () => {
    requestModal.classList.remove('hidden');
  });

  closeModalBtn.addEventListener('click', () => {
    requestModal.classList.add('hidden');
  });

  cancelBtn.addEventListener('click', () => {
    requestModal.classList.add('hidden');
  });

  proceedBtn.addEventListener('click', () => {
    window.location.href = 'request.html';
  });

  // Close modal if clicked outside the content area
  requestModal.addEventListener('click', (event) => {
    if (event.target === requestModal) {
      requestModal.classList.add('hidden');
    }
  });



     // multi-select dropdown
  document.addEventListener('DOMContentLoaded', () => {
            // Constant for dropdown options
            const DROPDOWN_OPTIONS = [
                { id: "opt1", name: "Recover grant" },
                { id: "opt2", name: "Process refund" },
                { id: "opt3", name: "Initiate payment" },
                { id: "opt4", name: "Review application" },
                { id: "opt5", name: "Generate report" },
                { id: "opt6", name: "Update status" },
                { id: "opt7", name: "Send notification" }
            ];

            // DOM element references
            const multiselectDropdown = document.querySelector('.multiselect-dropdown');
            const multiselectButton = document.getElementById('multiselectButton');
            const optionsPanel = multiselectDropdown.querySelector('.options');
            const dropdownOptionsList = document.getElementById('dropdownOptionsList');
            const selectedDisplay = document.getElementById('selectedDisplay');

            // State management
            const selectedValues = new Set(); // Stores IDs of selected options

            /**
             * Renders the dropdown options dynamically from DROPDOWN_OPTIONS.
             */
            function renderDropdownOptions() {
                dropdownOptionsList.innerHTML = ''; // Clear existing options
                DROPDOWN_OPTIONS.forEach(option => {
                    const listItem = document.createElement('li');
                    listItem.className = 'px-3 py-2 cursor-pointer hover:bg-gray-100'; // Tailwind for list item

                    const label = document.createElement('label');
                    label.className = 'flex items-center w-full cursor-pointer'; // Tailwind for label

                    const input = document.createElement('input');
                    input.type = 'checkbox';
                    input.value = option.id;
                    input.checked = selectedValues.has(option.id); // Set checked state based on 'selectedValues'
                    input.className = 'mr-2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500'; // Tailwind for checkbox

                    label.appendChild(input);
                    label.appendChild(document.createTextNode(option.name)); // Display option name

                    listItem.appendChild(label);
                    dropdownOptionsList.appendChild(listItem);
                });
            }

            /**
             * Updates the text content of the button to reflect selected options.
             */
            function updateSelectedDisplay() {
                const selectedNames = DROPDOWN_OPTIONS
                    .filter(option => selectedValues.has(option.id))
                    .map(option => option.name);

                if (selectedNames.length > 0) {
                    selectedDisplay.textContent = selectedNames.join(', ');
                } else {
                    selectedDisplay.textContent = 'Select Options';
                }

                // Update ARIA attribute on the button
                multiselectButton.setAttribute('aria-expanded', multiselectDropdown.classList.contains('open'));
            }

            // --- Event Listeners ---

            // Toggle dropdown visibility on button click
            multiselectButton.addEventListener('click', () => {
                multiselectDropdown.classList.toggle('open');
                multiselectButton.classList.toggle('open'); // Toggle 'open' class on button for arrow rotation
                updateSelectedDisplay(); // Re-evaluate ARIA expanded state
            });

            // Prevent clicks inside options panel from closing the dropdown
            optionsPanel.addEventListener('click', (event) => {
                event.stopPropagation(); 
            });

            // Handle checkbox changes using event delegation on the options list
            dropdownOptionsList.addEventListener('change', (event) => {
                const checkbox = event.target;
                if (checkbox.type === 'checkbox') {
                    if (checkbox.checked) {
                        selectedValues.add(checkbox.value);
                    } else {
                        selectedValues.delete(checkbox.value);
                    }
                    updateSelectedDisplay(); // Update button text
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (event) => {
                if (!multiselectDropdown.contains(event.target)) {
                    multiselectDropdown.classList.remove('open');
                    multiselectButton.classList.remove('open'); // Ensure arrow resets
                    updateSelectedDisplay(); // Re-evaluate ARIA expanded state
                }
            });

            // --- Initial Setup ---
            renderDropdownOptions();
            updateSelectedDisplay();
        });
</script>

</body>
</html>
